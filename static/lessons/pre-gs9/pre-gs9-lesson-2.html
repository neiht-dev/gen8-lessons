<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thì Hiện Tại Hoàn Thành</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        html {
            font-size: 20px;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.5s ease;
        }
        
        .slide {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes float {
            0% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
            100% {
                transform: translateY(0px);
            }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        .content-box {
            background-color: rgba(255, 255, 255, 0.9);
            overflow-y: auto;
            padding: 1rem 1rem 2rem 1rem;
        }
        
        .exercise-input {
            border-bottom: 2px dashed #4f46e5;
            min-width: 100px;
            display: inline-block;
            text-align: center;
        }
        
        .exercise-input:focus {
            outline: none;
            border-bottom: 2px solid #4f46e5;
        }
        
        .btn-check {
            background-color: #4f46e5;
            color: white;
        }
        
        .btn-check:hover {
            background-color: #4338ca;
        }
        
        .correct {
            color: #10b981;
            font-weight: bold;
        }
        
        .incorrect {
            color: #ef4444;
            font-weight: bold;
        }
        
        .highlight {
            background-color: #fef08a;
            padding: 2px 4px;
            border-radius: 4px;
        }
        
        .timeline {
            height: 6px;
            background-color: #e5e7eb;
            border-radius: 3px;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        
        .progress {
            height: 100%;
            background-color: #4f46e5;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-100 to-purple-100 min-h-screen flex items-center justify-center p-4">
    <div class="relative w-full max-w-5xl h-[90vh] mx-auto">
        <!-- Slide counter -->
        <div class="absolute bottom-2 sm:bottom-full sm:top-7 right-4 z-50 flex items-center gap-2">
            <button onclick="showSlide(currentSlide - 1)" class="bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg font-bold text-indigo-600 hover:bg-indigo-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <button onclick="showSlide(currentSlide + 1)" class="bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg font-bold text-indigo-600 hover:bg-indigo-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
            <button onclick="toggleOutline()" class="bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg font-bold text-indigo-600 hover:bg-indigo-50">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            <div class="bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg font-bold text-indigo-600 text-xs">
                <span id="slide-counter"></span>
            </div>
        </div>

        <!-- Outline Modal -->
        <div id="outlineModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
            <div class="bg-white rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-indigo-700">Nội dung bài học</h2>
                    <button onclick="toggleOutline()" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="prose prose-lg max-w-none">
                    <h3 class="text-xl font-bold text-indigo-600 mb-4">Thì Hiện Tại Hoàn Thành</h3>
                    
                    <!-- Outline items will be generated by JavaScript -->
                    <div id="outline-items-container" class="space-y-2"></div>
                </div>
            </div>
        </div>

        <!-- Slides container -->
        <div class="relative w-full h-full overflow-hidden rounded-2xl shadow-2xl bg-white">
            <!-- Slide 1: Title -->
            <div class="slide active content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <div class="flex flex-col items-center justify-start h-full text-center">
                    <h1 class="text-2xl font-bold text-indigo-700 mb-8">GRAMMAR FOCUS</h1>
                    <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-2xl md:text-4xl font-bold px-6 py-3 rounded-full mb-5 shadow-lg floating text-white">
                        THÌ HIỆN TẠI HOÀN THÀNH
                    </div>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                        <div class="mt-6 flex justify-center">
                            <img src="https://img.freepik.com/free-vector/hand-drawn-english-school-background_23-2149483851.jpg" alt="Grammar Learning" class="object-cover h-52 floating rounded-lg">
                        </div>
                        <div class="bg-gradient-to-r from-indigo-100 to-green-100 border-l-4 border-indigo-500 py-5 px-10 text-left rounded-2xl">
                            <p class="font-bold text-indigo-800 text-xl">Mục tiêu bài học:</p>
                            <ul class="list-disc pl-5 text-gray-700 space-y-2 mt-2">
                                <li>Hiểu khái niệm về thì hiện tại hoàn thành</li>
                                <li>Phân biệt với thì quá khứ đơn</li>
                                <li>Cấu trúc câu khẳng định, phủ định, nghi vấn</li>
                                <li>Cách sử dụng và dấu hiệu nhận biết</li>
                            </ul>
                        </div>
                    </div>
                    <div class="my-3 opacity-0">---</div>
                </div>
            </div>

            <!-- Slide 2: Time Concept Example -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">Khái niệm thời gian quan trọng</h2>
                <div class="flex flex-col items-center h-[80%]">
                    <div class="bg-white p-6 rounded-xl shadow-md mb-6 w-full max-w-2xl">
                        <p class="text-xl mb-4">Sự khác biệt giữa tiếng Việt và tiếng Anh:</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                <p class="font-bold text-red-800">Tiếng Việt:</p>
                                <p>"Tôi đã sống ở đây 3 năm"</p>
                                <p class="text-sm text-gray-600">→ Không rõ bây giờ còn sống ở đó không</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                <p class="font-bold text-green-800">Tiếng Anh:</p>
                                <p><span class="highlight">I lived here for 3 years.</span> (Quá khứ đơn)</p>
                                <p class="text-sm text-gray-600">→ Bây giờ không còn sống ở đó</p>
                                <p><span class="highlight">I have lived here for 3 years.</span> (Hiện tại hoàn thành)</p>
                                <p class="text-sm text-gray-600">→ Vẫn đang sống ở đó</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="w-full max-w-2xl">
                        <img src="https://img.freepik.com/free-vector/time-management-concept-illustration_114360-4397.jpg" alt="Time concept" class="w-full h-auto rounded-lg shadow-md">
                    </div>
                </div>
            </div>

            <!-- Slide 3: Present Perfect Timeline -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">Dòng thời gian hiện tại hoàn thành</h2>
                <div class="flex flex-col items-center justify-center h-[80%]">
                    <div class="bg-white p-6 rounded-xl shadow-md w-full max-w-3xl">
                        <div class="flex justify-center mb-6">
                            <img src="https://www.eslbase.com/wp-content/uploads/grammar/present-perfect.svg" alt="Present Perfect Timeline" class="w-4/5 h-auto">
                        </div>
                        <p class="text-xl text-center">Thì hiện tại hoàn thành diễn tả:</p>
                        <ul class="list-disc pl-5 space-y-2 mt-4 text-xl">
                            <li>Hành động bắt đầu trong quá khứ và <span class="highlight">còn tiếp diễn đến hiện tại</span></li>
                            <li>Hành động đã hoàn thành nhưng <span class="highlight">kết quả còn liên quan đến hiện tại</span></li>
                            <li>Kinh nghiệm trong đời sống <span class="highlight">tính đến thời điểm hiện tại</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Slide 4: Present Perfect Structure -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">Cấu trúc thì hiện tại hoàn thành</h2>
                <div class="flex flex-col gap-6 h-[80%] overflow-y-auto">
                    <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                        <p class="font-bold text-indigo-800 text-xl mb-3">1. Câu khẳng định:</p>
                        <div class="bg-white p-3 rounded-lg text-xl">
                            <p>S + <span class="highlight">have/has</span> + <span class="highlight">V3/V-ed</span> + ...</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3">
                            <div class="bg-green-50 p-2 rounded">
                                <p>I <span class="highlight">have lived</span> here for 5 years.</p>
                                <p class="text-sm text-gray-600">Tôi đã sống ở đây 5 năm (và vẫn đang sống)</p>
                            </div>
                            <div class="bg-green-50 p-2 rounded">
                                <p>She <span class="highlight">has finished</span> her homework.</p>
                                <p class="text-sm text-gray-600">Cô ấy đã hoàn thành bài tập (và kết quả còn hiện tại)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                        <p class="font-bold text-yellow-800 text-xl mb-3">2. Câu phủ định:</p>
                        <div class="bg-white p-3 rounded-lg text-xl">
                            <p>S + <span class="highlight">have/has not</span> + <span class="highlight">V3/V-ed</span> + ...</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3">
                            <div class="bg-green-50 p-2 rounded">
                                <p>I <span class="highlight">haven't seen</span> him recently.</p>
                                <p class="text-sm text-gray-600">Tôi không gặp anh ấy gần đây</p>
                            </div>
                            <div class="bg-green-50 p-2 rounded">
                                <p>He <span class="highlight">hasn't visited</span> that museum yet.</p>
                                <p class="text-sm text-gray-600">Anh ấy chưa từng thăm viện bảo tàng đó</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                        <p class="font-bold text-red-800 text-xl mb-3">3. Câu nghi vấn:</p>
                        <div class="bg-white p-3 rounded-lg text-xl">
                            <p><span class="highlight">Have/Has</span> + S + <span class="highlight">V3/V-ed</span> + ...?</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3">
                            <div class="bg-green-50 p-2 rounded">
                                <p><span class="highlight">Have</span> you ever <span class="highlight">been</span> to Paris?</p>
                                <p class="text-sm text-gray-600">Bạn đã từng đến Paris chưa?</p>
                            </div>
                            <div class="bg-green-50 p-2 rounded">
                                <p><span class="highlight">Has</span> she <span class="highlight">finished</span> her work yet?</p>
                                <p class="text-sm text-gray-600">Cô ấy đã hoàn thành công việc chưa?</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 5: Have vs Has -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">Sử dụng HAVE và HAS</h2>
                <div class="flex flex-col md:flex-row items-center justify-around gap-8 h-[80%]">
                    <div class="w-full md:w-1/2">
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <p class="text-xl mb-4">Quy tắc:</p>
                            <div class="grid grid-cols-2 gap-4 text-lg">
                                <div class="bg-green-50 p-3 rounded-lg">
                                    <p class="font-bold text-center">HAVE</p>
                                    <p class="text-center">I, You, We, They</p>
                                </div>
                                <div class="bg-blue-50 p-3 rounded-lg">
                                    <p class="font-bold text-center">HAS</p>
                                    <p class="text-center">He, She, It</p>
                                </div>
                            </div>
                            
                            <div class="mt-6 bg-yellow-50 p-4 rounded-lg">
                                <p class="font-bold text-xl text-yellow-800">MẸO NHỚ:</p>
                                <p class="mt-2">Giống cách chia động từ TOBE ở hiện tại đơn:</p>
                                <p>I <span class="highlight">am</span> → I <span class="highlight">have</span></p>
                                <p>He/She/It <span class="highlight">is</span> → He/She/It <span class="highlight">has</span></p>
                                <p>You/We/They <span class="highlight">are</span> → You/We/They <span class="highlight">have</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="w-full md:w-1/2 flex items-center justify-center">
                        <img src="https://img.freepik.com/free-vector/hand-drawn-people-taking-notes_23-2149191319.jpg" alt="Grammar Rules" class="w-full h-auto max-h-64 rounded-xl shadow-md floating">
                    </div>
                </div>
            </div>

            <!-- Slide 6: Past Participle (V3) -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">Cách dùng V3 (Quá khứ phân từ)</h2>
                <div class="flex flex-col md:flex-row items-start justify-around gap-8 h-[80%]">
                    <div class="w-full md:w-1/2">
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <p class="text-xl mb-4 text-center">Có 3 loại động từ:</p>
                            <div class="grid grid-cols-1 gap-4">
                                <div class="bg-green-50 p-3 rounded-lg">
                                    <p class="font-bold">1. Động từ có quy tắc:</p>
                                    <p>thêm <span class="highlight">-ed</span> (work → worked)</p>
                                </div>
                                <div class="bg-blue-50 p-3 rounded-lg">
                                    <p class="font-bold">2. Động từ bất quy tắc:</p>
                                    <p>dạng riêng (go → gone)</p>
                                    <p class="text-sm mt-2">(Cần học thuộc bảng động từ bất quy tắc)</p>
                                </div>
                                <div class="bg-yellow-50 p-3 rounded-lg">
                                    <p class="font-bold">3. Động từ không thay đổi:</p>
                                    <p>cut → cut, put → put</p>
                                </div>
                            </div>
                            
                            <div class="mt-6 bg-purple-50 p-4 rounded-lg">
                                <p class="font-bold text-purple-800">Mẹo phát âm đuôi -ed:</p>
                                <ul class="list-disc pl-5 space-y-1 mt-2">
                                    <li>/id/: sau âm "t, d" (wanted, needed)</li>
                                    <li>/t/: sau âm vô thanh (worked, missed)</li>
                                    <li>/d/: sau âm hữu thanh (lived, played)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="w-full md:w-1/2 flex flex-col items-center">
                        <div class="flex items-start justify-center mb-4">
                            <img src="https://img.freepik.com/free-vector/hand-drawn-english-learning-illustration_23-2149488243.jpg" alt="Past Participle" class="w-full h-auto rounded-xl shadow-md floating">
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-md w-full">
                            <p class="font-bold text-center">Cách nhận biết V3:</p>
                            <p>Với động từ có quy tắc: luôn kết thúc bằng <span class="highlight">-ed</span></p>
                            <p>Với động từ bất quy tắc: cột 3 trong bảng động từ bất quy tắc</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 7: Present Perfect Usage -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">Cách dùng thì hiện tại hoàn thành</h2>
                <div class="flex flex-col gap-6 h-[80%] overflow-y-auto">
                    <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                        <p class="font-bold text-indigo-800 text-xl mb-2">1. Hành động bắt đầu trong quá khứ, tiếp tục đến hiện tại</p>
                        <div class="bg-white p-3 rounded-lg text-lg">
                            <p>S + have/has + V3 + <span class="highlight">for/since + khoảng thời gian</span></p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3">
                            <div class="bg-green-50 p-2 rounded">
                                <p>I <span class="highlight">have lived</span> here <span class="highlight">for 5 years</span>.</p>
                                <p class="text-sm text-gray-600">(Vẫn đang sống ở đây)</p>
                            </div>
                            <div class="bg-green-50 p-2 rounded">
                                <p>She <span class="highlight">has worked</span> here <span class="highlight">since 2010</span>.</p>
                                <p class="text-sm text-gray-600">(Vẫn đang làm việc ở đây)</p>
                            </div>
                        </div>
                        <div class="timeline mt-4">
                            <div class="progress w-full" style="width: 80%;"></div>
                        </div>
                        <p class="text-sm text-gray-600 text-center">For + khoảng thời gian (for 3 days), Since + mốc thời gian (since Monday)</p>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                        <p class="font-bold text-blue-800 text-xl mb-2">2. Hành động đã xảy ra nhưng kết quả còn ở hiện tại</p>
                        <div class="bg-white p-3 rounded-lg text-lg">
                            <p>S + have/has + V3 (thường không có trạng từ chỉ thời gian)</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3">
                            <div class="bg-green-50 p-2 rounded">
                                <p>She <span class="highlight">has gone</span> to work.</p>
                                <p class="text-sm text-gray-600">(Bây giờ cô ấy đang ở chỗ làm)</p>
                            </div>
                            <div class="bg-green-50 p-2 rounded">
                                <p>I <span class="highlight">have lost</span> my keys.</p>
                                <p class="text-sm text-gray-600">(Bây giờ tôi không có chìa khóa)</p>
                            </div>
                        </div>
                        <div class="timeline mt-4">
                            <div class="progress w-full" style="width: 60%;"></div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                        <p class="font-bold text-purple-800 text-xl mb-2">3. Kinh nghiệm trong đời (không quan tâm thời điểm cụ thể)</p>
                        <div class="bg-white p-3 rounded-lg text-lg">
                            <p>S + have/has + <span class="highlight">ever/never</span> + V3</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3">
                            <div class="bg-green-50 p-2 rounded">
                                <p><span class="highlight">Have</span> you <span class="highlight">ever been</span> to Japan?</p>
                                <p class="text-sm text-gray-600">(Bạn đã từng đến Nhật chưa?)</p>
                            </div>
                            <div class="bg-green-50 p-2 rounded">
                                <p>I <span class="highlight">have never seen</span> that movie.</p>
                                <p class="text-sm text-gray-600">(Tôi chưa bao giờ xem phim đó)</p>
                            </div>
                        </div>
                        <div class="timeline mt-4">
                            <div class="progress w-full" style="width: 80%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 8: Time Expressions -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">Dấu hiệu nhận biết thì hiện tại hoàn thành</h2>
                <div class="flex flex-col md:flex-row items-center h-[80%] gap-6">
                    <div class="w-full md:w-1/2 flex flex-col gap-4">
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <p class="font-bold text-lg mb-2">Trạng từ thường gặp:</p>
                            <div class="grid grid-cols-2 gap-3">
                                <div class="bg-green-50 p-3 rounded">just</div>
                                <div class="bg-green-50 p-3 rounded">already</div>
                                <div class="bg-green-50 p-3 rounded">yet</div>
                                <div class="bg-green-50 p-3 rounded">recently</div>
                                <div class="bg-green-50 p-3 rounded">lately</div>
                                <div class="bg-green-50 p-3 rounded">so far</div>
                                <div class="bg-green-50 p-3 rounded">never</div>
                                <div class="bg-green-50 p-3 rounded">ever</div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <p class="font-bold text-lg mb-2">For & Since:</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><span class="highlight">For + khoảng thời gian</span><br>(for 2 days, for a long time)</li>
                                <li><span class="highlight">Since + mốc thời gian</span><br>(since Monday, since 2005)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="w-full md:w-1/2">
                        <img src="https://img.freepik.com/free-vector/hand-drawn-concept-calendar-illustration_23-2149222048.jpg" alt="Time expressions" class="w-full h-auto rounded-xl shadow-md">
                        <div class="mt-4 bg-yellow-50 p-4 rounded-lg">
                            <p class="font-bold text-yellow-800">Mẹo nhận biết:</p>
                            <p>Khi gặp các từ như <span class="highlight">just, already, yet, ever, never, recently, lately, so far, for, since</span> → nghĩ ngay đến thì hiện tại hoàn thành</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 9: Present Perfect vs Past Simple -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <h2 class="text-2xl font-bold text-indigo-700 mb-6">So sánh hiện tại hoàn thành và quá khứ đơn</h2>
                <div class="flex flex-col h-[80%]">
                    <div class="bg-white p-6 rounded-xl shadow-md mb-6">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center">Tiêu chí</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center">Hiện tại hoàn thành</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center">Quá khứ đơn</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-center">Thời gian</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">Không xác định/gắn với hiện tại</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">Xác định trong quá khứ</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-center">Kết quả</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">Còn liên quan đến hiện tại</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">Không còn liên quan</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-center">Dấu hiệu</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">never, ever, just, yet, already, for, since, ...</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">yesterday, last week, ago, in 2010, ...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-xl shadow-md">
                        <p class="font-bold text-lg mb-3">Ví dụ phân biệt:</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-green-50 p-3 rounded-lg">
                                <p class="font-bold">Hiện tại hoàn thành:</p>
                                <p>I <span class="highlight">have seen</span> that movie. (Tôi đã xem phim đó)</p>
                                <p class="text-sm">→ Tôi biết nội dung phim rồi</p>
                            </div>
                            <div class="bg-blue-50 p-3 rounded-lg">
                                <p class="font-bold">Quá khứ đơn:</p>
                                <p>I <span class="highlight">saw</span> that movie last week. (Tôi đã xem phim đó tuần trước)</p>
                                <p class="text-sm">→ Chỉ nói về thời điểm xem</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 10: Exercise 1 - Word Order -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <div class="flex flex-col h-full">
                    <h2 class="text-2xl font-bold text-indigo-700 mb-6">Bài tập 1: Sắp xếp từ thành câu</h2>
                    <p class="text-xl mb-8">Sắp xếp các từ sau thành câu hoàn chỉnh:</p>
                    <div class="flex-grow flex flex-col items-center justify-start">
                        <div class="exercise-item bg-white p-6 rounded-xl shadow-md w-full max-w-lg">
                            <div class="mb-6">
                                <p class="text-xl">(lived / have / here / I / years / for five)</p>
                                <div class="flex flex-wrap gap-2 mt-2">
                                    <button onclick="addWordToAnswer(this)" class="word-choice bg-indigo-100 px-3 py-1 rounded-lg hover:bg-indigo-200">lived</button>
                                    <button onclick="addWordToAnswer(this)" class="word-choice bg-indigo-100 px-3 py-1 rounded-lg hover:bg-indigo-200">have</button>
                                    <button onclick="addWordToAnswer(this)" class="word-choice bg-indigo-100 px-3 py-1 rounded-lg hover:bg-indigo-200">here</button>
                                    <button onclick="addWordToAnswer(this)" class="word-choice bg-indigo-100 px-3 py-1 rounded-lg hover:bg-indigo-200">I</button>
                                    <button onclick="addWordToAnswer(this)" class="word-choice bg-indigo-100 px-3 py-1 rounded-lg hover:bg-indigo-200">for five</button>
                                    <button onclick="addWordToAnswer(this)" class="word-choice bg-indigo-100 px-3 py-1 rounded-lg hover:bg-indigo-200">years</button>
                                </div>
                            </div>
                            <div class="mb-6">
                                <p class="text-xl">Câu của bạn:</p>
                                <div id="answer-area" class="min-h-12 border-2 border-dashed border-indigo-300 rounded-lg p-2 flex flex-wrap gap-2">
                                    <!-- Words will be added here -->
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <button onclick="checkWordOrder(this, 'I have lived here for five years')" class="btn-check px-4 py-2 rounded-lg font-bold">Kiểm tra</button>
                                <button onclick="resetWordOrder(this)" class="bg-gray-200 px-4 py-2 rounded-lg font-bold hover:bg-gray-300">Làm lại</button>
                                <div class="answer hidden text-xl"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 11: Exercise 2 - Fill in the blanks -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <div class="flex flex-col h-full">
                    <h2 class="text-2xl font-bold text-indigo-700 mb-6">Bài tập 2: Điền vào chỗ trống</h2>
                    <p class="text-xl mb-8">Chia động từ trong ngoặc:</p>
                    <div class="flex-grow flex items-start justify-center">
                        <div class="exercise-item bg-white p-6 rounded-xl shadow-md w-full max-w-lg">
                            <p class="text-xl mb-4">1. She <span class="exercise-input" contenteditable="true" data-answer="has lived"></span> (live) in Hanoi for 3 years.</p>
                            <p class="text-xl mb-4">2. They <span class="exercise-input" contenteditable="true" data-answer="have not finished"></span> (not finish) their project yet.</p>
                            <p class="text-xl mb-4">3. <span class="exercise-input" contenteditable="true" data-answer="Have you ever been"></span> (you/ever/be) to Japan?</p>
                            <div class="flex items-center space-x-4">
                                <button onclick="checkInputs(this)" class="btn-check px-4 py-2 rounded-lg font-bold">Kiểm tra</button>
                                <button onclick="resetInputs(this)" class="bg-gray-200 px-4 py-2 rounded-lg font-bold hover:bg-gray-300">Làm lại</button>
                                <div class="answer hidden text-xl"></div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-indigo-100 p-4 rounded-lg">
                        <p class="font-bold text-indigo-800 text-xl">Nhắc nhở:</p>
                        <p>1. Chú ý HAVE/HAS + V3</p>
                        <p>2. Phủ định: HAVE/HAS + NOT + V3</p>
                        <p>3. Nghi vấn: HAVE/HAS + S + V3</p>
                    </div>
                </div>
            </div>

            <!-- Slide 12: Exercise 3 - Multiple Choice -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <div class="flex flex-col h-full">
                    <h2 class="text-2xl font-bold text-indigo-700 mb-6">Bài tập 3: Chọn đáp án đúng</h2>
                    <p class="text-xl mb-8">Chọn đáp án hoàn thành câu:</p>
                    <div class="flex-grow flex flex-col items-center justify-start gap-6">
                        <div class="exercise-item bg-white p-4 rounded-xl shadow-md w-full max-w-lg">
                            <p class="text-xl mb-4">I ________ in this company since 2015.</p>
                            <div class="grid grid-cols-1 gap-2">
                                <button onclick="checkMultipleChoice(this, 'correct')" class="choice text-left p-2 rounded-lg border border-gray-200 hover:bg-gray-100">have worked</button>
                                <button onclick="checkMultipleChoice(this, 'incorrect')" class="choice text-left p-2 rounded-lg border border-gray-200 hover:bg-gray-100">worked</button>
                                <button onclick="checkMultipleChoice(this, 'incorrect')" class="choice text-left p-2 rounded-lg border border-gray-200 hover:bg-gray-100">am working</button>
                            </div>
                            <div class="answer mt-2 hidden text-xl"></div>
                        </div>
                        
                        <div class="exercise-item bg-white p-4 rounded-xl shadow-md w-full max-w-lg">
                            <p class="text-xl mb-4">She ________ her keys yet.</p>
                            <div class="grid grid-cols-1 gap-2">
                                <button onclick="checkMultipleChoice(this, 'incorrect')" class="choice text-left p-2 rounded-lg border border-gray-200 hover:bg-gray-100">didn't find</button>
                                <button onclick="checkMultipleChoice(this, 'correct')" class="choice text-left p-2 rounded-lg border border-gray-200 hover:bg-gray-100">hasn't found</button>
                                <button onclick="checkMultipleChoice(this, 'incorrect')" class="choice text-left p-2 rounded-lg border border-gray-200 hover:bg-gray-100">doesn't find</button>
                            </div>
                            <div class="answer mt-2 hidden text-xl"></div>
                        </div>
                    </div>
                    <div class="mt-6 bg-purple-100 p-4 rounded-lg">
                        <p class="font-bold text-purple-800 text-xl">Mẹo:</p>
                        <p>1. Dựa vào dấu hiệu thời gian (since, yet, never, ...)</p>
                        <p>2. Xem cấu trúc câu (have/has + V3)</p>
                    </div>
                </div>
            </div>

            <!-- Slide 13: Exercise 4 - Correct the mistakes -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <div class="flex flex-col h-full">
                    <h2 class="text-2xl font-bold text-indigo-700 mb-6">Bài tập 4: Tìm và sửa lỗi sai</h2>
                    <p class="text-xl mb-8">Mỗi câu sau có 1 lỗi sai, tìm và sửa lại:</p>
                    <div class="flex-grow flex items-start justify-center">
                        <div class="exercise-item bg-white p-6 rounded-xl shadow-md w-full max-w-lg">
                            <div class="mb-6">
                                <p class="text-xl">They has lived here for 10 years.</p>
                                <div class="mt-2">
                                    <input type="text" class="correction-input border-2 border-indigo-300 rounded px-3 py-1 w-full text-xl" placeholder="Viết câu đúng vào đây..." data-correct="They have lived here for 10 years.">
                                </div>
                            </div>
                            
                            <div class="mb-6">
                                <p class="text-xl">I already finish my homework.</p>
                                <div class="mt-2">
                                    <input type="text" class="correction-input border-2 border-indigo-300 rounded px-3 py-1 w-full text-xl" placeholder="Viết câu đúng vào đây..." data-correct="I have already finished my homework.">
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4">
                                <button onclick="checkCorrections(this)" class="btn-check px-4 py-2 rounded-lg font-bold">Kiểm tra</button>
                                <button onclick="resetCorrections(this)" class="bg-gray-200 px-4 py-2 rounded-lg font-bold hover:bg-gray-300">Làm lại</button>
                                <div class="answer hidden text-xl"></div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 bg-blue-100 p-4 rounded-lg">
                        <p class="font-bold text-blue-800 text-xl">Nhắc nhở:</p>
                        <p>1. Kiểm tra HAVE/HAS phù hợp với chủ ngữ</p>
                        <p>2. Chắc chắn động từ ở dạng V3</p>
                        <p>3. Vị trí của trạng từ (already, yet,...)</p>
                    </div>
                </div>
            </div>

            <!-- Slide 14: Exercise 5 - Experience Questions -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <div class="flex flex-col h-full">
                    <h2 class="text-2xl font-bold text-indigo-700 mb-6">Bài tập 5: Trả lời câu hỏi kinh nghiệm</h2>
                    <p class="text-xl mb-8">Trả lời các câu hỏi sau về bản thân bạn:</p>
                    <div class="flex-grow flex items-start justify-center">
                        <div class="exercise-item bg-white p-6 rounded-xl shadow-md w-full max-w-lg">
                            <div class="mb-6">
                                <p class="text-xl mb-2">1. Have you ever traveled abroad?</p>
                                <input type="text" class="experience-answer border-2 border-indigo-300 rounded px-3 py-1 w-full text-xl" placeholder="Viết câu trả lời của bạn...">
                            </div>
                            
                            <div class="mb-6">
                                <p class="text-xl mb-2">2. What is the most beautiful place you have visited?</p>
                                <input type="text" class="experience-answer border-2 border-indigo-300 rounded px-3 py-1 w-full text-xl" placeholder="Viết câu trả lời của bạn...">
                            </div>
                            
                            <div class="flex items-center space-x-4">
                                <button onclick="showSampleAnswers(this)" class="btn-check px-4 py-2 rounded-lg font-bold">Xem gợi ý</button>
                                <div class="answer hidden text-xl">
                                    <p class="font-bold mb-2">Gợi ý trả lời:</p>
                                    <p>1. Yes, I have traveled to Thailand. / No, I have never traveled abroad.</p>
                                    <p>2. The most beautiful place I have visited is Ha Long Bay.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 15: Conclusion -->
            <div class="slide content-box p-5 md:p-6 rounded-2xl w-full h-full">
                <div class="flex flex-col items-center justify-center h-full text-center">
                    <h1 class="text-2xl font-bold text-indigo-700 mb-3">Tổng kết bài học</h1>
                    <div class="text-xl md:text-2xl text-gray-700 mb-3">
                        <p class="mb-4">Hôm nay chúng ta đã học về</p>
                        <div class="bg-gradient-to-r from-purple-600 to-indigo-600 text-4xl font-bold px-6 py-2 rounded-full inline-block text-white">
                            THÌ HIỆN TẠI HOÀN THÀNH
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-md w-full max-w-2xl mt-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
                            <div class="bg-indigo-50 p-3 rounded-lg">
                                <p class="font-bold mb-2">Cấu trúc chính:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>S + have/has + V3</li>
                                    <li>S + haven't/hasn't + V3</li>
                                    <li>Have/Has + S + V3?</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 p-3 rounded-lg">
                                <p class="font-bold mb-2">Cách sử dụng:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>Hành động tiếp tục đến hiện tại</li>
                                    <li>Kết quả còn ở hiện tại</li>
                                    <li>Kinh nghiệm</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-center mt-6">
                        <img src="https://img.freepik.com/free-vector/hand-drawn-flat-people-celebration_23-2149077571.jpg" class="h-32 rounded-lg object-cover" alt="Celebration Image">
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-400 to-blue-500 text-white p-6 rounded-xl mt-6 max-w-2xl w-full">
                        <p class="text-xl md:text-2xl font-bold mb-2">Hẹn gặp lại trong bài học tiếp theo!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Outline items data for Present Perfect tense
        const outlineItems = [
            {
                title: "1. Giới thiệu",
                content: [
                    "Mục tiêu bài học:",
                    "- Hiểu khái niệm về thì hiện tại hoàn thành",
                    "- Phân biệt với thì quá khứ đơn",
                    "- Cấu trúc câu khẳng định, phủ định, nghi vấn"
                ]
            },
            {
                title: "2. Khái niệm thời gian",
                content: [
                    "Sự khác biệt giữa tiếng Việt và tiếng Anh",
                    "Ví dụ:",
                    "- Tôi đã sống ở đây 3 năm (bây giờ hết rồi) → quá khứ đơn",
                    "- Tôi đã sống ở đây 3 năm (bây giờ còn) → hiện tại hoàn thành"
                ]
            },
            {
                title: "3. Dòng thời gian",
                content: [
                    "Hiểu về dòng thời gian hiện tại hoàn thành",
                    "Diễn tả:",
                    "- Hành động từ quá khứ đến hiện tại",
                    "- Kết quả còn ở hiện tại",
                    "- Kinh nghiệm trong đời"
                ]
            },
            {
                title: "4. Cấu trúc câu",
                content: [
                    "Câu khẳng định: S + have/has + V3",
                    "Câu phủ định: S + have/has not + V3",
                    "Câu nghi vấn: Have/Has + S + V3?"
                ]
            },
            {
                title: "5. HAVE vs HAS",
                content: [
                    "I, You, We, They → have",
                    "He, She, It → has",
                    "Mẹo nhớ: giống cách chia động từ TOBE"
                ]
            },
            {
                title: "6. Quá khứ phân từ (V3)",
                content: [
                    "Động từ có quy tắc: thêm -ed",
                    "Động từ bất quy tắc: học thuộc",
                    "Mẹo phát âm đuôi -ed"
                ]
            },
            {
                title: "7. Cách sử dụng",
                content: [
                    "Hành động từ quá khứ đến hiện tại",
                    "Kết quả còn ở hiện tại",
                    "Kinh nghiệm trong đời"
                ]
            },
            {
                title: "8. Dấu hiệu nhận biết",
                content: [
                    "Trạng từ: just, already, yet, ever, never, recently, lately",
                    "For + khoảng thời gian",
                    "Since + mốc thời gian"
                ]
            },
            {
                title: "9. So sánh với quá khứ đơn",
                content: [
                    "Thời gian: không xác định vs xác định",
                    "Kết quả: còn liên quan vs không liên quan",
                    "Dấu hiệu: ever, never, just,... vs yesterday, last week,..."
                ]
            },
            {
                title: "10. Bài tập 1: Sắp xếp từ",
                content: [
                    "Sắp xếp các từ thành câu hiện tại hoàn thành đúng"
                ]
            },
            {
                title: "11. Bài tập 2: Chia động từ",
                content: [
                    "Chia động từ trong ngoặc ở thì hiện tại hoàn thành"
                ]
            },
            {
                title: "12. Bài tập 3: Trắc nghiệm",
                content: [
                    "Chọn đáp án đúng sử dụng thì hiện tại hoàn thành"
                ]
            },
            {
                title: "13. Bài tập 4: Sửa lỗi sai",
                content: [
                    "Tìm và sửa lỗi sai về thì hiện tại hoàn thành"
                ]
            },
            {
                title: "14. Bài tập 5: Kinh nghiệm",
                content: [
                    "Trả lời câu hỏi về kinh nghiệm bản thân"
                ]
            },
            {
                title: "15. Tổng kết",
                content: [
                    "Ôn tập kiến thức đã học",
                    "Chuẩn bị cho bài tiếp theo"
                ]
            }
        ];

        // Generate outline items in the modal
        document.addEventListener('DOMContentLoaded', function() {
            const outlineContainer = document.getElementById('outline-items-container');
            
            outlineItems.forEach((item, index) => {
                const outlineItem = document.createElement('div');
                outlineItem.className = 'outline-item hover:bg-indigo-50 p-2 rounded cursor-pointer transition-colors';
                outlineItem.onclick = function() { goToSlide(index) };
                
                let contentHtml = `<h4 class="text-lg font-bold text-indigo-500">${item.title}</h4>`;
                
                if (item.content) {
                    contentHtml += '<ul class="list-disc pl-6 space-y-1 text-gray-700">';
                    item.content.forEach(point => {
                        if (point.includes(":")) {
                            const [mainPoint, subPoints] = point.split(":");
                            contentHtml += `<li>${mainPoint}:<ul class="list-disc pl-6 mt-1">`;
                            subPoints.split(/[-—]/).filter(p => p.trim()).forEach(subPoint => {
                                contentHtml += `<li>${subPoint.trim()}</li>`;
                            });
                            contentHtml += '</ul></li>';
                        } else {
                            contentHtml += `<li>${point}</li>`;
                        }
                    });
                    contentHtml += '</ul>';
                }
                
                outlineItem.innerHTML = contentHtml;
                outlineContainer.appendChild(outlineItem);
            });
        });

        // Outline Modal functions
        function toggleOutline() {
            const modal = document.getElementById('outlineModal');
            modal.classList.toggle('hidden');
        }

        function goToSlide(slideNumber) {
            showSlide(slideNumber);
            toggleOutline(); // Close modal after navigation
        }

        // Close modal when clicking outside
        document.getElementById('outlineModal').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleOutline();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && !document.getElementById('outlineModal').classList.contains('hidden')) {
                toggleOutline();
            }
        });

        // Slide management
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const slideCounter = document.getElementById('slide-counter');

        // Update the counter display with total slides
        function updateSlideCounter() {
            slideCounter.textContent = `${currentSlide + 1}/${totalSlides}`;
        }

        function showSlide(n) {
            // Hide all slides
            slides.forEach(slide => {
                slide.classList.remove('active');
            });

            // Calculate new slide index
            currentSlide = (n + totalSlides) % totalSlides;

            // Show new slide
            slides[currentSlide].classList.add('active');

            // Update slide counter
            updateSlideCounter();
        }

        // Initialize counter on page load
        updateSlideCounter();

        // Touch swipe detection
        let touchStartX = 0;
        let touchEndX = 0;
                
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        }, {passive: true});

        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, {passive: true});

        function handleSwipe() {
            const threshold = 50;
            const diff = touchStartX - touchEndX;
            if (diff > threshold) {
                showSlide(currentSlide + 1);
            } else if (diff < -threshold) {
                showSlide(currentSlide - 1);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function (e) {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') {
                showSlide(currentSlide + 1);
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                showSlide(currentSlide - 1);
            }
        });

        // Exercise functions - Word Order
        function addWordToAnswer(button) {
            const word = button.textContent;
            const answerArea = document.getElementById('answer-area');
            const wordSpan = document.createElement('span');
            wordSpan.className = 'bg-indigo-100 px-2 py-1 rounded-lg inline-block';
            wordSpan.textContent = word;
            answerArea.appendChild(wordSpan);
        }

        function checkWordOrder(button, correctAnswer) {
            const answerArea = document.getElementById('answer-area');
            const userAnswer = Array.from(answerArea.children)
                .map(span => span.textContent)
                .join(' ');
            const answerDiv = button.closest('.exercise-item').querySelector('.answer');
            
            if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                answerDiv.innerHTML = '<p class="correct">✓ Chính xác!</p>';
                answerArea.style.borderColor = '#10b981';
            } else {
                answerDiv.innerHTML = `<p class="incorrect">✗ Chưa chính xác! Đáp án đúng là: <span class="font-bold">${correctAnswer}</span></p>`;
                answerArea.style.borderColor = '#ef4444';
            }
            
            answerDiv.classList.remove('hidden');
            
            // Change button to reset button
            button.textContent = 'Làm lại';
            button.onclick = function() {
                resetWordOrder(this);
            };
        }

        function resetWordOrder(button) {
            const answerArea = document.getElementById('answer-area');
            answerArea.innerHTML = '';
            answerArea.style.borderColor = '#a5b4fc';
            
            const answerDiv = button.closest('.exercise-item').querySelector('.answer');
            answerDiv.classList.add('hidden');
            
            // Change button back to check button
            button.textContent = 'Kiểm tra';
            button.onclick = function() {
                checkWordOrder(this, 'I have lived here for five years');
            };
        }

        // Exercise functions - Inputs
        function checkInputs(button) {
            const exerciseItem = button.closest('.exercise-item');
            const inputs = exerciseItem.querySelectorAll('.exercise-input');
            const answerDiv = exerciseItem.querySelector('.answer');
            let allCorrect = true;
            let answersHtml = '';

            inputs.forEach(input => {
                const userAnswer = input.textContent.trim().toLowerCase();
                const correctAnswer = input.dataset.answer.toLowerCase();
                
                if (userAnswer === correctAnswer) {
                    answersHtml += `<p class="correct">✓ Câu ${inputs.length > 1 ? input.parentElement.textContent.split('.')[0] : ""} đúng: ${correctAnswer}</p>`;
                    input.style.borderBottom = '2px solid #10b981';
                } else {
                    answersHtml += `<p class="incorrect">✗ Câu ${inputs.length > 1 ? input.parentElement.textContent.split('.')[0] : ""} sai: ${correctAnswer} (Bạn nhập: ${userAnswer})</p>`;
                    input.style.borderBottom = '2px solid #ef4444';
                    allCorrect = false;
                }
            });

            answerDiv.innerHTML = answersHtml;
            answerDiv.classList.remove('hidden');

            // Change button to reset button
            button.textContent = 'Làm lại';
            button.onclick = function() {
                resetInputs(this);
            };
        }

        function resetInputs(button) {
            const exerciseItem = button.closest('.exercise-item');
            const inputs = exerciseItem.querySelectorAll('.exercise-input');
            const answerDiv = exerciseItem.querySelector('.answer');

            // Reset inputs
            inputs.forEach(input => {
                input.textContent = '';
                input.style.borderBottom = '2px dashed #4f46e5';
            });

            // Reset answer display
            answerDiv.innerHTML = '';
            answerDiv.classList.add('hidden');

            // Reset button
            button.textContent = 'Kiểm tra';
            button.onclick = function() {
                checkInputs(this);
            };
        }

        // Exercise functions - Multiple Choice
        function checkMultipleChoice(button, type) {
            const answerDiv = button.closest('.exercise-item').querySelector('.answer');
            const allChoices = button.parentElement.querySelectorAll('.choice');
            
            allChoices.forEach(choice => {
                if (choice.getAttribute('onclick').includes('correct')) {
                    choice.classList.add('bg-green-100', 'border-green-500');
                } else {
                    choice.classList.add('bg-red-100', 'border-red-500');
                }
                choice.classList.remove('hover:bg-gray-100');
            });
            
            if (type === 'correct') {
                answerDiv.innerHTML = '<p class="correct">✓ Chính xác!</p>';
            } else {
                answerDiv.innerHTML = '<p class="incorrect">✗ Sai rồi!</p>';
            }
            
            answerDiv.classList.remove('hidden');
        }

        // Exercise functions - Corrections
        function checkCorrections(button) {
            const exerciseItem = button.closest('.exercise-item');
            const inputs = exerciseItem.querySelectorAll('.correction-input');
            const answerDiv = exerciseItem.querySelector('.answer');
            let allCorrect = true;
            let answersHtml = '';

            inputs.forEach(input => {
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.dataset.correct.toLowerCase();
                
                if (userAnswer === correctAnswer) {
                    answersHtml += `<p class="correct">✓ Câu ${inputs.length > 1 ? input.parentElement.parentElement.textContent.split('.')[0] : ""} đúng: ${correctAnswer}</p>`;
                    input.classList.add('border-green-500');
                    input.classList.remove('border-indigo-300');
                } else {
                    answersHtml += `<p class="incorrect">✗ Câu ${inputs.length > 1 ? input.parentElement.parentElement.textContent.split('.')[0] : ""} sai: ${correctAnswer} (Bạn nhập: ${userAnswer})</p>`;
                    input.classList.add('border-red-500');
                    input.classList.remove('border-indigo-300');
                    allCorrect = false;
                }
            });

            answerDiv.innerHTML = answersHtml;
            answerDiv.classList.remove('hidden');

            // Change button to reset button
            button.textContent = 'Làm lại';
            button.onclick = function() {
                resetCorrections(this);
            };
        }

        function resetCorrections(button) {
            const exerciseItem = button.closest('.exercise-item');
            const inputs = exerciseItem.querySelectorAll('.correction-input');
            const answerDiv = exerciseItem.querySelector('.answer');

            // Reset inputs
            inputs.forEach(input => {
                input.value = '';
                input.classList.remove('border-green-500', 'border-red-500');
                input.classList.add('border-indigo-300');
            });

            // Reset answer display
            answerDiv.innerHTML = '';
            answerDiv.classList.add('hidden');

            // Reset button
            button.textContent = 'Kiểm tra';
            button.onclick = function() {
                checkCorrections(this);
            };
        }

        // Exercise functions - Experience answers
        function showSampleAnswers(button) {
            const answerDiv = button.closest('.flex').querySelector('.answer');
            answerDiv.classList.toggle('hidden');
        }
    </script>
</body>
</html>